{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 09:57:27"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 09:57:27"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 09:57:27"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 09:57:27"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 09:57:27"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 09:57:27"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 09:57:28"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 09:57:28"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 09:57:28"}
{"address":"::","code":"EADDRINUSE","errno":-98,"level":"error","message":"‚ùå uncaughtException: listen EADDRINUSE: address already in use :::3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1811:16)\n    at listenInCluster (node:net:1859:12)\n    at Server.listen (node:net:1947:7)\n    at startServer (/opt/lampp/htdocs/backTransbank-1/src/server.js:71:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","syscall":"listen","timestamp":"2025-04-29 09:57:29"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 09:57:49"}
{"level":"info","message":"Servidor HTTPS cerrado","timestamp":"2025-04-29 09:57:49"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 09:57:51"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 09:57:51"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 09:57:51"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 09:57:51"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 09:57:51"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 09:57:51"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 09:57:52"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 09:57:52"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 09:57:52"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 09:57:53"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:00:29"}
{"level":"info","message":"Servidor HTTPS cerrado","timestamp":"2025-04-29 10:00:29"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:00:52"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:00:52"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 10:00:53"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 10:00:53"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 10:00:53"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 10:00:53"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 10:00:54"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 10:00:54"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:00:54"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:00:54"}
{"level":"info","message":"GET /tester","timestamp":"2025-04-29 10:01:45"}
{"level":"info","message":"GET /favicon.ico","timestamp":"2025-04-29 10:01:45"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:01:50"}
{"level":"info","message":"POST /api/terminal/loadKeys","timestamp":"2025-04-29 10:01:55"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 10:02:00"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:02:11"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: undefined","timestamp":"2025-04-29 10:02:18"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:06:23"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: undefined","timestamp":"2025-04-29 10:06:29"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:06:43"}
{"level":"info","message":"Servidor HTTPS cerrado","timestamp":"2025-04-29 10:06:43"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:06:52"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:06:52"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:06:53"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:07:07"}
{"level":"info","message":"GET /api/payment","timestamp":"2025-04-29 10:08:38"}
{"level":"info","message":"GET /favicon.ico","timestamp":"2025-04-29 10:08:38"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:08:47"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: 348","timestamp":"2025-04-29 10:09:05"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:12:21"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:13:39"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:13:49"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:13:49"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): Could not open serial connection...","timestamp":"2025-04-29 10:13:49"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM1: ACK has not been received in 2000 ms.","timestamp":"2025-04-29 10:13:51"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM2: ACK has not been received in 2000 ms.","timestamp":"2025-04-29 10:13:53"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:13:53"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:13:53"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:13:53"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:13:56"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:16:06"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:16:06"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): Could not open serial connection...","timestamp":"2025-04-29 10:16:06"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM0: Could not open serial connection...","timestamp":"2025-04-29 10:16:07"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM1: Could not open serial connection...","timestamp":"2025-04-29 10:16:07"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:16:07"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:16:07"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:16:07"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:16:22"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 10:16:26"}
{"level":"error","message":"Error al reconectar con el POS: transbankService.autoconnect is not a function","stack":"TypeError: transbankService.autoconnect is not a function\n    at exports.reconnectPOS (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:48:41)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 10:16:26"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 10:16:52"}
{"level":"error","message":"Error al reconectar con el POS: transbankService.autoconnect is not a function","stack":"TypeError: transbankService.autoconnect is not a function\n    at exports.reconnectPOS (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:48:41)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 10:16:52"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 10:17:00"}
{"level":"error","message":"Error al reconectar con el POS: transbankService.autoconnect is not a function","stack":"TypeError: transbankService.autoconnect is not a function\n    at exports.reconnectPOS (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:48:41)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 10:17:00"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 10:17:06"}
{"level":"error","message":"Error al conectar al puerto especificado: ACK has not been received in 2000 ms.","stack":"Error: ACK has not been received in 2000 ms.\n    at Timeout._onTimeout (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8305)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2025-04-29 10:17:08"}
{"level":"info","message":"GET /api/terminal/ports","timestamp":"2025-04-29 10:17:13"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 10:17:19"}
{"level":"error","message":"Error al conectar al puerto especificado: Could not open serial connection...","stack":"Error: Could not open serial connection...\n    at SerialPort.<anonymous> (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:6451)\n    at SerialPort._error (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:82:22)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:118:18","timestamp":"2025-04-29 10:17:19"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:17:23"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:17:27"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:17:27"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): ACK has not been received in 2000 ms.","timestamp":"2025-04-29 10:17:29"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM0: Could not open serial connection...","timestamp":"2025-04-29 10:17:29"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM1: ACK has not been received in 2000 ms.","timestamp":"2025-04-29 10:17:31"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:17:31"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:17:31"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:17:31"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 10:19:48"}
{"level":"error","message":"Error al reconectar con el POS: transbankService.autoconnect is not a function","stack":"TypeError: transbankService.autoconnect is not a function\n    at exports.reconnectPOS (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:48:41)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 10:19:48"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 10:19:56"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 10:19:56"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:20:59"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:21:04"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: undefined","timestamp":"2025-04-29 10:21:08"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 10:22:39"}
{"level":"error","message":"Error al reconectar con el POS: transbankService.autoconnect is not a function","stack":"TypeError: transbankService.autoconnect is not a function\n    at exports.reconnectPOS (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:48:41)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 10:22:39"}
{"level":"info","message":"GET /health","timestamp":"2025-04-29 10:24:22"}
{"level":"info","message":"GET /health","timestamp":"2025-04-29 10:24:26"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:24:34"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:25:04"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:25:20"}
{"level":"error","message":"‚ùå unhandledRejection: Cannot read properties of undefined (reading 'debug')","stack":"TypeError: Cannot read properties of undefined (reading 'debug')\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8590\n    at onwriteError (node:internal/streams/writable:418:3)\n    at onwrite (node:internal/streams/writable:460:7)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:170:13","timestamp":"2025-04-29 10:25:20"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","level":"error","message":"Unhandled Rejection at:","timestamp":"2025-04-29 10:25:20"}
{"level":"info","message":"Recibida se√±al unhandledRejection. Cerrando servidor...","timestamp":"2025-04-29 10:25:20"}
{"level":"error","message":"Error durante la venta: ACK has not been received in 2000 ms.","stack":"Error: ACK has not been received in 2000 ms.\n    at Timeout._onTimeout (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8305)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2025-04-29 10:25:22"}
{"0":"T","1":"i","10":"r","11":"r","12":"a","13":"n","14":"d","15":"o","16":" ","17":"s","18":"e","19":"r","2":"m","20":"v","21":"i","22":"d","23":"o","24":"r","3":"e","4":"o","5":"u","6":"t","7":" ","8":"c","9":"e","level":"error","message":"Error durante el shutdown:","timestamp":"2025-04-29 10:25:25"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:26:47"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:26:47"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): Could not open serial connection...","timestamp":"2025-04-29 10:26:47"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:26:47"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:26:47"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:26:47"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:26:55"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:26:55"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:27:49"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:27:49"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:27:56"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:28:03"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:28:03"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:33:04"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:33:11"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:33:11"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): Could not open serial connection...","timestamp":"2025-04-29 10:33:11"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:33:11"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:33:11"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:33:11"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:33:20"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:33:20"}
{"level":"info","message":"GET /tester","timestamp":"2025-04-29 10:33:27"}
{"level":"info","message":"GET /favicon.ico","timestamp":"2025-04-29 10:33:28"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:33:33"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:33:35"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:33:35"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): Could not open serial connection...","timestamp":"2025-04-29 10:33:35"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:33:35"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:33:35"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:33:35"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:33:38"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:33:43"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:33:43"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:35:51"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:35:55"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:35:55"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:38:26"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000000100|028203|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000000100|028203|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 10:38:26"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 10:39:38"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 10:39:47"}
{"level":"error","message":"Error al conectar al puerto especificado: Could not open serial connection...","stack":"Error: Could not open serial connection...\n    at SerialPort.<anonymous> (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:6451)\n    at SerialPort._error (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:82:22)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:118:18","timestamp":"2025-04-29 10:39:47"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:39:51"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:39:53"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:39:53"}
{"level":"warn","message":"No se pudo conectar a puerto preferido (/dev/ttyACM0): Could not open serial connection...","timestamp":"2025-04-29 10:39:53"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM0: Could not open serial connection...","timestamp":"2025-04-29 10:39:53"}
{"level":"warn","message":"Fall√≥ conexi√≥n a /dev/ttyACM1: ACK has not been received in 2000 ms.","timestamp":"2025-04-29 10:39:55"}
{"level":"error","message":"‚ùå No se pudo conectar a ning√∫n puerto POS v√°lido","timestamp":"2025-04-29 10:39:55"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:39:55"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:39:55"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 10:39:59"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 10:39:59"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:40:34"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: undefined","timestamp":"2025-04-29 10:40:40"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:41:10"}
{"level":"error","message":"‚ùå unhandledRejection: Cannot read properties of undefined (reading 'debug')","stack":"TypeError: Cannot read properties of undefined (reading 'debug')\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8590\n    at onwriteError (node:internal/streams/writable:418:3)\n    at onwrite (node:internal/streams/writable:460:7)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:170:13","timestamp":"2025-04-29 10:41:10"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","level":"error","message":"Unhandled Rejection at:","timestamp":"2025-04-29 10:41:10"}
{"level":"info","message":"Recibida se√±al unhandledRejection. Cerrando servidor...","timestamp":"2025-04-29 10:41:10"}
{"level":"error","message":"Error durante la venta: ACK has not been received in 2000 ms.","stack":"Error: ACK has not been received in 2000 ms.\n    at Timeout._onTimeout (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8305)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2025-04-29 10:41:12"}
{"0":"T","1":"i","10":"r","11":"r","12":"a","13":"n","14":"d","15":"o","16":" ","17":"s","18":"e","19":"r","2":"m","20":"v","21":"i","22":"d","23":"o","24":"r","3":"e","4":"o","5":"u","6":"t","7":" ","8":"c","9":"e","level":"error","message":"Error durante el shutdown:","timestamp":"2025-04-29 10:41:15"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:42:31"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:42:31"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 10:42:31"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 10:42:31"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 10:42:31"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 10:42:31"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 10:42:36"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 10:42:36"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:42:36"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:42:36"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:43:39"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: undefined","timestamp":"2025-04-29 10:43:47"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 10:53:04"}
{"level":"info","message":"Servidor HTTPS cerrado","timestamp":"2025-04-29 10:53:04"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 10:53:08"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 10:53:08"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 10:53:08"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 10:53:08"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 10:53:08"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 10:53:08"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 10:53:09"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 10:53:09"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 10:53:09"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 10:53:09"}
{"level":"info","message":"GET /api/payment","timestamp":"2025-04-29 10:53:39"}
{"level":"info","message":"GET /favicon.ico","timestamp":"2025-04-29 10:53:39"}
{"level":"info","message":"GET /api/payment","timestamp":"2025-04-29 10:53:41"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:54:13"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: 354","timestamp":"2025-04-29 10:54:26"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:55:30"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: 355","timestamp":"2025-04-29 10:55:41"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 10:59:16"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: 356","timestamp":"2025-04-29 10:59:31"}
{"level":"info","message":"GET /health","timestamp":"2025-04-29 11:03:00"}
{"level":"info","message":"GET /health","timestamp":"2025-04-29 11:03:03"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 11:03:27"}
{"level":"error","message":"Error al reconectar con el POS: transbankService.autoconnect is not a function","stack":"TypeError: transbankService.autoconnect is not a function\n    at exports.reconnectPOS (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:48:41)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 11:03:27"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:03:56"}
{"level":"info","message":"‚úÖ POS saludable y conectado","timestamp":"2025-04-29 11:09:49"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 11:13:03"}
{"level":"info","message":"Servidor HTTPS cerrado","timestamp":"2025-04-29 11:13:03"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 11:13:05"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 11:13:05"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 11:13:05"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 11:13:05"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 11:13:05"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 11:13:05"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 11:13:06"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 11:13:06"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 11:13:06"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 11:13:06"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 11:13:18"}
{"level":"error","message":"Error al conectar al puerto especificado: Could not open serial connection...","stack":"Error: Could not open serial connection...\n    at SerialPort.<anonymous> (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:6451)\n    at SerialPort._error (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:82:22)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:118:18","timestamp":"2025-04-29 11:13:18"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:13:32"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:13:51"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:13:54"}
{"level":"info","message":"GET /api/terminal/ports","timestamp":"2025-04-29 11:14:00"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:14:03"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:14:19"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:14:43"}
{"level":"info","message":"GET /health","timestamp":"2025-04-29 11:15:21"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:15:29"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|A12345|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|A12345|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 11:15:29"}
{"level":"info","message":"GET /api/terminal/status","timestamp":"2025-04-29 11:16:31"}
{"level":"info","message":"GET /api/terminal/last-transaction","timestamp":"2025-04-29 11:16:39"}
{"level":"error","message":"Error al obtener √∫ltima transacci√≥n: You have to connect to a POS to send this message: 0250|0","stack":"Error: You have to connect to a POS to send this message: 0250|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.getLastSale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3769)\n    at TransbankService.getLastTransaction (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:59:39)\n    at exports.getLastTransaction (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:28:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 11:16:39"}
{"level":"error","message":"Error obteniendo √∫ltima transacci√≥n: You have to connect to a POS to send this message: 0250|0","stack":"Error: You have to connect to a POS to send this message: 0250|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.getLastSale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3769)\n    at TransbankService.getLastTransaction (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:59:39)\n    at exports.getLastTransaction (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:28:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 11:16:39"}
{"level":"info","message":"GET /api/terminal/totals","timestamp":"2025-04-29 11:16:44"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 11:17:31"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 11:17:34"}
{"level":"info","message":"POST /api/terminal/reconnect","timestamp":"2025-04-29 11:17:41"}
{"level":"info","message":"GET /tester","timestamp":"2025-04-29 11:17:44"}
{"level":"info","message":"GET /favicon.ico","timestamp":"2025-04-29 11:17:44"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 11:17:46"}
{"level":"error","message":"Error al conectar al puerto especificado: Cannot destructure property 'portPath' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'portPath' of 'req.body' as it is undefined.\n    at exports.conectarPuerto (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:49:13)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 11:17:46"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 11:18:41"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 11:18:41"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 11:18:53"}
{"level":"error","message":"Error al conectar al puerto especificado: Cannot destructure property 'portPath' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'portPath' of 'req.body' as it is undefined.\n    at exports.conectarPuerto (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:49:13)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 11:18:53"}
{"level":"info","message":"GET /api/terminal/ports","timestamp":"2025-04-29 11:19:52"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:20:06"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: 358","timestamp":"2025-04-29 11:20:26"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 11:23:55"}
{"level":"error","message":"Error al conectar al puerto especificado: Could not open serial connection...","stack":"Error: Could not open serial connection...\n    at SerialPort.<anonymous> (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:6451)\n    at SerialPort._error (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:82:22)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:118:18","timestamp":"2025-04-29 11:23:55"}
{"level":"info","message":"POST /api/terminal/connect","timestamp":"2025-04-29 11:24:41"}
{"level":"error","message":"Error al conectar al puerto especificado: Cannot destructure property 'portPath' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'portPath' of 'req.body' as it is undefined.\n    at exports.conectarPuerto (/opt/lampp/htdocs/backTransbank-1/src/controllers/terminalController.js:49:13)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:346:12)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-04-29 11:24:41"}
{"level":"info","message":"GET /api/terminal/ports","timestamp":"2025-04-29 11:29:35"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:29:41"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000001000|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000001000|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 11:29:41"}
{"level":"info","message":"‚úÖ POS saludable y conectado","timestamp":"2025-04-29 11:29:46"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:30:47"}
{"level":"error","message":"Error durante la venta: You have to connect to a POS to send this message: 0200|000000666|123450|0|0","stack":"Error: You have to connect to a POS to send this message: 0200|000000666|123450|0|0\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8024\n    at new Promise (<anonymous>)\n    at e.exports.send (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:7975)\n    at e.exports.sale (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:3062)\n    at TransbankService.sendSaleCommand (/opt/lampp/htdocs/backTransbank-1/src/services/transbankService.js:32:39)\n    at exports.processPayment (/opt/lampp/htdocs/backTransbank-1/src/controllers/paymentController.js:19:43)\n    at newFn (/opt/lampp/htdocs/backTransbank-1/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/layer.js:95:5)\n    at next (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/opt/lampp/htdocs/backTransbank-1/node_modules/express/lib/router/route.js:119:3)","timestamp":"2025-04-29 11:30:47"}
{"level":"info","message":"Recibida se√±al SIGINT. Cerrando servidor...","timestamp":"2025-04-29 11:31:22"}
{"level":"info","message":"Iniciando servidor en modo development","timestamp":"2025-04-29 11:33:53"}
{"level":"warn","message":"No hay conexi√≥n activa que cerrar","timestamp":"2025-04-29 11:33:53"}
{"level":"info","message":"Conectado manualmente al puerto /dev/ttyACM0","timestamp":"2025-04-29 11:33:53"}
{"level":"info","message":"POS conectado a puerto preferido: undefined","timestamp":"2025-04-29 11:33:53"}
{"level":"info","message":"Commerce Code: tu_codigo_comercio","timestamp":"2025-04-29 11:33:53"}
{"level":"info","message":"Terminal ID: IM750193","timestamp":"2025-04-29 11:33:53"}
{"level":"info","message":"Inicializaci√≥n del terminal completada (llaves cargadas)","timestamp":"2025-04-29 11:33:54"}
{"level":"info","message":"üîê Llaves cargadas exitosamente","timestamp":"2025-04-29 11:33:54"}
{"level":"info","message":"üîÑ Iniciando monitor de salud del POS","timestamp":"2025-04-29 11:33:54"}
{"level":"info","message":"Servidor Transbank POS con SSL escuchando en https://localhost:3000","timestamp":"2025-04-29 11:33:54"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:35:05"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: 360","timestamp":"2025-04-29 11:35:21"}
{"level":"info","message":"GET /api/payment","timestamp":"2025-04-29 11:38:51"}
{"level":"info","message":"GET /favicon.ico","timestamp":"2025-04-29 11:38:51"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:40:23"}
{"level":"info","message":"Venta exitosa - Operaci√≥n: undefined","timestamp":"2025-04-29 11:40:32"}
{"level":"info","message":"POST /api/payment","timestamp":"2025-04-29 11:41:51"}
{"level":"error","message":"‚ùå unhandledRejection: Cannot read properties of undefined (reading 'debug')","stack":"TypeError: Cannot read properties of undefined (reading 'debug')\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8590\n    at onwriteError (node:internal/streams/writable:418:3)\n    at onwrite (node:internal/streams/writable:460:7)\n    at /opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/node_modules/@serialport/stream/dist/index.js:170:13","timestamp":"2025-04-29 11:41:51"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","level":"error","message":"Unhandled Rejection at:","timestamp":"2025-04-29 11:41:51"}
{"level":"info","message":"Recibida se√±al unhandledRejection. Cerrando servidor...","timestamp":"2025-04-29 11:41:51"}
{"level":"error","message":"Error durante la venta: ACK has not been received in 2000 ms.","stack":"Error: ACK has not been received in 2000 ms.\n    at Timeout._onTimeout (/opt/lampp/htdocs/backTransbank-1/node_modules/transbank-pos-sdk/dist/transbank.js:1:8305)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2025-04-29 11:41:53"}
{"0":"T","1":"i","10":"r","11":"r","12":"a","13":"n","14":"d","15":"o","16":" ","17":"s","18":"e","19":"r","2":"m","20":"v","21":"i","22":"d","23":"o","24":"r","3":"e","4":"o","5":"u","6":"t","7":" ","8":"c","9":"e","level":"error","message":"Error durante el shutdown:","timestamp":"2025-04-29 11:41:56"}
